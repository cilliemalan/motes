pipelines:
  prepare:
    group: motes
    label_template: "${github[:8]}"
    locking: off
    materials:
      github:
        git: https://github.com/cilliemalan/motes.git
        branch: master
    stages:
      - checks:
          jobs:
            environment:
              tasks:
                - script: build-scripts/check-environment.sh
      - prerequisites:
          jobs:
            npm:
              tasks:
                - script: build-scripts/prerequisites.sh
            dev-cluster:
              tasks:
                - script: "echo Create dev cluster if needed..."
      - code-checks:
          jobs:
            lint:
              tasks:
                - script: build-scripts/lint.sh